<div id="todo-overview-modal" class="modal fade" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title d-flex align-items-center gap-2">
          <i class="bi bi-card-checklist"></i>
          <span>Todo List</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="d-flex flex-wrap align-items-center justify-content-between mb-3 gap-2">
          <div class="todo-overview-tags d-flex align-items-center gap-2">
            <button type="button"
                    class="btn btn-tag btn-tag-active"
                    :class="{ active: todoOverviewFilters.active }"
                    v-on:click="toggleOverviewFilter('active')">
              <span>진행중</span>
              <span class="count-badge">{{ todos.length }}</span>
            </button>
            <button type="button"
                    class="btn btn-tag btn-tag-completed"
                    :class="{ active: todoOverviewFilters.completed }"
                    v-on:click="toggleOverviewFilter('completed')">
              <span>완료</span>
              <span class="count-badge">{{ completedTodos.length }}</span>
            </button>
            <button type="button"
                    class="btn btn-tag btn-tag-total"
                    :class="{ active: todoOverviewFilters.active && todoOverviewFilters.completed }"
                    v-on:click="toggleOverviewFilter('all')">
              <span>전체</span>
              <span class="count-badge">{{ todos.length + completedTodos.length }}</span>
            </button>
          </div>
        </div>
        <div v-if="filteredOverviewTodos.length > 0" class="list-group overflow-auto fs-3" id="todo-overview-list"
             style="max-height: 60vh;">
          <div class="list-group-item todo-overview-item d-flex align-items-start gap-3"
               v-for="todo in filteredOverviewTodos"
               :key="todo.id"
               :data-id="todo.id"
               :class="{
                 'completed': todo.status === 'COMPLETED',
                 'todo-overview-item-active': todo.status === 'ACTIVE',
                 'todo-overview-item-completed': todo.status === 'COMPLETED'
               }">
            <div v-if="todo.status === 'ACTIVE'"
                 class="handle d-flex align-items-center justify-content-center flex-shrink-0">
              <i class="bi bi-list"></i>
            </div>
            <div class="row align-items-start g-3 flex-lg-nowrap flex-grow-1 w-100">
              <div class="col-lg-8 col-12">
                <div class="fw-semibold" v-text="todo.title"></div>
                <p class="mb-0 text-muted small todo-overview-content" v-if="todo.content"
                   v-text="todo.content"></p>
              </div>
              <div class="col-lg-4 col-12">
                <div
                    class="todo-overview-meta d-flex flex-column align-items-lg-end align-items-start gap-2 text-muted small">
                  <div class="d-flex align-items-center gap-1 justify-content-lg-end">
                    <i class="bi bi-pencil-square"></i>
                    <span :title="formatFullDateTime(todo.createdDate)">{{ formatSimpleDate(todo.createdDate) }}</span>
                  </div>
                  <div class="d-flex align-items-center gap-1 justify-content-lg-end" v-if="todo.completedDate">
                    <i class="bi bi-check-circle-fill"></i>
                    <span
                        :title="formatFullDateTime(todo.completedDate)">{{ formatSimpleDate(todo.completedDate) }}</span>
                  </div>
                  <div class="d-flex flex-wrap flex-lg-nowrap gap-2 justify-content-lg-end">
                    <button type="button" class="btn btn-outline-success btn-sm d-flex align-items-center gap-1"
                            v-if="todo.status === 'ACTIVE'"
                            v-on:click="completeTodoFromOverview(todo)">
                      <i class="bi bi-check2"></i><span>완료</span>
                    </button>
                    <button type="button" class="btn btn-outline-primary btn-sm d-flex align-items-center gap-1"
                            v-if="todo.status === 'COMPLETED'"
                            v-on:click="reopenTodoFromOverview(todo)">
                      <i class="bi bi-arrow-counterclockwise"></i><span>재오픈</span>
                    </button>
                    <button type="button" class="btn btn-outline-danger btn-sm d-flex align-items-center gap-1"
                            v-on:click="deleteTodoFromOverview(todo)">
                      <i class="bi bi-trash"></i><span>삭제</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div v-else class="text-center text-muted py-5 border rounded">
          <i class="bi bi-inbox display-6"></i>
          <p class="mt-3 mb-0">표시할 할 일이 없습니다.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>
