<div class="footer-dock row text-align-center">
  <a href="/" class="link col-3" data-link="/">
    <i class="bi bi-house-door"></i>
    <br/>
    <span>홈</span>
  </a>
  <a th:if="${loginMember != null}" th:href="@{/duty/{name}(name=${loginMember.id})}" class="link col-3"
     data-link="/duty">
    <i class="bi bi-calendar2-week"></i>
    <br/>
    <span>내 시간표</span>
  </a>
  <a th:if="${loginMember == null}" th:href="@{/auth/login}" class="link col-3">
    <i class="bi bi-calendar2-week"></i>
    <br/>
    <span>내 시간표</span>
  </a>
  <a href="/member/d-day" class="link col-3" data-link="member/d-day">
    <i class="bi bi-calendar-check"></i>
    <br/>
    <span>디데이</span>
  </a>
  <a href="/member" class="link col-3" data-link="/member">
    <i class="bi bi-person"></i>
    <br/>
    <span>내 정보</span>
  </a>
</div>

<script>
  const currentPath = window.location.pathname;
  const loginMemberId = parseInt("[[${loginMember?.id}]]");
  switch (currentPath) {
    case '/':
      document.querySelector('.footer-dock .link[data-link="/"]').classList.add('active');
      break;
    case '/member':
      document.querySelector('.footer-dock .link[data-link="/member"]').classList.add('active');
      break;
    case '/member/d-day':
      document.querySelector('.footer-dock .link[data-link="member/d-day"]').classList.add('active');
      break;
    case '/duty/' + loginMemberId:
      document.querySelector('.footer-dock .link[data-link="/duty"]').classList.add('active');
      break;
  }
  // footer-dock a on click event intercept
  document.querySelector('.footer-dock').addEventListener('click', function (event) {
    if (event.target.tagName === 'A') {
      event.preventDefault();
      event.target.classList.add('active');
      window.location.href = event.target.getAttribute('href');
    }
  });
</script>
